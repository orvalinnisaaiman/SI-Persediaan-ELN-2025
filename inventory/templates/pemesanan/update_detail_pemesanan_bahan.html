{% extends "base/base.html" %}
{% load static %}
{% load l10n %}

{% block content %}
<div class="page-header">
  <h3 class="page-title">Edit Data Pemesanan Bahan</h3>
</div>

<div class="row">
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <form method="post" class="form-sample">
          {% csrf_token %}

          <h4 class="card-title mb-4">Pemesanan #{{detail.id_pemesanan.id_pemesanan}}</h4>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Tanggal Pemesanan</label>
            <div class="col-sm-9">
              <input class="form-control" type="date" name="tanggal_pemesanan" readonly
                     value="{{ detail.id_pemesanan.tanggal_pemesanan|date:'Y-m-d' }}">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Supplier</label>
            <div class="col-sm-9">
              <input class="form-control" readonly
                     value="{{ detail.id_pemesanan.id_supplier.nama_supplier }}">
            </div>
          </div>

          <small class="text d-block mb-3">
          Kolom "Tanggal Pemesanan" dan "Supplier" dapat diubah pada halaman Data Pemesanan.
          </small>

          <hr class="my-4">
          <h4 class="card-title mb-3">Detail Pemesanan Bahan</h4>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Nama Bahan</label>
            <div class="col-sm-9">
              <select class="form-control" name="nama_bahan" required>
                {% for b in bahanobj %}
                  <option value="{{ b.id_bahan }}" {% if b.id_bahan == detail.id_bahan.id_bahan %}selected{% endif %}>
                    {{ b }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Kuantitas</label>
            <div class="col-sm-9">
              <input class="form-control js-thousand" type="number" inputmode="numeric" min="1" name="jumlah_bahan_masuk"
                     value="{{ detail.jumlah_bahan_masuk|unlocalize }}" required>
            </div>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'read_detail_pemesanan_bahan' detail.id_pemesanan.id_pemesanan %}" class="btn btn-light mr-2">Batal</a>
            <button type="submit" class="btn btn-success"><i class="ti-check mr-1"></i> Simpan Perubahan</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
