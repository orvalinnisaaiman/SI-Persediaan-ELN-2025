{% extends "base/base.html" %}
{% load static %}
{% load l10n %}

{% block content %}
<div class="page-header">
  <h3 class="page-title">Edit Data Pemesanan Produk</h3>
  {% comment %} <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'read_pemesanan' %}">Data Pemesanan</a></li>
      <li class="breadcrumb-item"><a href="{% url 'read_detail_pemesanan_produk' detail.id_pemesanan.id_pemesanan %}">Detail Produk (Pemesanan #{{ detail.id_pemesanan.id_pemesanan }})</a></li>
      <li class="breadcrumb-item active" aria-current="page">Edit</li>
    </ol>
  </nav> {% endcomment %}
</div>

<div class="row">
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <form method="post" class="form-sample">
          {% csrf_token %}

          <h4 class="card-title mb-4">Pemesanan #{{detail.id_pemesanan.id_pemesanan}}</h4>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Tanggal Pemesanan</label>
            <div class="col-sm-9">
              <input class="form-control" type="date" name="tanggal_pemesanan" readonly
                     value="{{ detail.id_pemesanan.tanggal_pemesanan|date:'Y-m-d' }}">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Supplier</label>
            <div class="col-sm-9">
              <input class="form-control" readonly
                     value="{{ detail.id_pemesanan.id_supplier.nama_supplier }}">
            </div>
          </div>

          <small class="text d-block mb-3">
          Kolom "Tanggal Pemesanan" dan "Supplier" dapat diubah pada halaman Data Pemesanan.
          </small>

          <hr class="my-4">
          <h4 class="card-title mb-3">Detail Produk</h4>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Nama Produk</label>
            <div class="col-sm-9">
              <select class="form-control" name="nama_produk" required>
                {% for p in produkobj %}
                  <option value="{{ p.id_produk }}" {% if p.id_produk == detail.id_produk.id_produk %}selected{% endif %}>
                    {{ p }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-3 col-form-label">Kuantitas (pcs)</label>
            <div class="col-sm-9">
              <input class="form-control js-thousand" type="number" inputmode="numeric" min="1" name="jumlah_produk_masuk"
                     value="{{ detail.jumlah_produk_masuk|unlocalize }}" required>
            </div>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'read_detail_pemesanan_produk' detail.id_pemesanan.id_pemesanan %}" class="btn btn-light mr-2">Batal</a>
            <button type="submit" class="btn btn-success"><i class="ti-check mr-1"></i> Simpan Perubahan</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
